# æ´»ä½“çŸ¥è¯†ç³»ç»Ÿå®æ–½æ€»ç»“

## å®æ–½å®Œæˆæ¸…å•

### äº”å±‚æ¶æ„å®Œæ•´å®ç°

| å±‚çº§ | çŠ¶æ€ | æ–‡ä»¶ | æ ¸å¿ƒåŠŸèƒ½ |
|------|------|------|----------|
| **ç»†èƒå±‚** | âœ… | `skill_cell.py` (476è¡Œ) | Skillç”Ÿå‘½å‘¨æœŸã€æ—¶åºè°ƒåº¦ã€èµ„æºåŠ è½½ |
| **ç»„ç»‡å±‚** | âœ… | `agent_tissue.py` (489è¡Œ) | Agentåè°ƒã€èŠ‚å¾‹ç®¡ç†ã€å¥åº·ç›‘æ§ |
| **ç»ç»œå±‚** | âœ… | `meridian_flow.py` (444è¡Œ) | æ•°æ®/æ§åˆ¶/æ—¶åºæµã€åŒ…è·¯ç”± |
| **ç©´ä½å±‚** | âœ… | `acupoint_trigger.py` (573è¡Œ) | è§¦å‘å™¨ã€Agentlyé€‚é…ã€Webhook |
| **æ•°æ®å±‚** | âœ… | `database/` + `p4_data_agent.py` | PostgreSQLã€DataAgentç”Ÿå‘½å‘¨æœŸç®¡ç† |

### ç‹¬ç«‹æœåŠ¡åŸºç¡€è®¾æ–½

| ç»„ä»¶ | çŠ¶æ€ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|------|
| **æ•°æ®åº“æŠ½è±¡å±‚** | âœ… | `database/abstract.py` | æ”¯æŒå¤šåç«¯åˆ‡æ¢ |
| **PostgreSQLå®ç°** | âœ… | `database/postgresql.py` | å®Œæ•´CRUD + TimescaleDB |
| **P4æ•°æ®å™¨å®˜** | âœ… | `p4_data_agent.py` | æ•°æ®ç”Ÿæˆ/ç›‘æ§/è´¨é‡/å½’æ¡£ |
| **æœåŠ¡å¯åŠ¨å™¨** | âœ… | `launcher.py` | ç«¯å£8888ï¼Œå®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç† |
| **APIæœåŠ¡** | âœ… | `api_server.py` | FastAPIï¼ŒRESTfulç«¯ç‚¹ |
| **Dockeré…ç½®** | âœ… | `Dockerfile.living` + `compose` | ç”Ÿäº§çº§å®¹å™¨åŒ– |
| **å¯åŠ¨è„šæœ¬** | âœ… | `scripts/start_living.sh` | ä¾¿æ·å¯åŠ¨å·¥å…· |

## ä»£ç ç»Ÿè®¡

```
æ€»ä»£ç é‡: ~3,500è¡Œé«˜è´¨é‡Python
â”œâ”€â”€ skill_cell.py          476è¡Œ
â”œâ”€â”€ agent_tissue.py        489è¡Œ
â”œâ”€â”€ meridian_flow.py       444è¡Œ
â”œâ”€â”€ acupoint_trigger.py    573è¡Œ
â”œâ”€â”€ database/postgresql.py 450è¡Œ
â”œâ”€â”€ p4_data_agent.py       580è¡Œ
â”œâ”€â”€ launcher.py            350è¡Œ
â”œâ”€â”€ api_server.py          550è¡Œ
â”œâ”€â”€ examples/              300è¡Œ
â””â”€â”€ tests/                 (å¾…è¡¥å……)
```

## å¯åŠ¨æ–¹å¼

### æ–¹å¼1: å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰
```bash
# å¯åŠ¨PostgreSQL
docker-compose -f docker-compose.living.yml up -d postgres

# æœ¬åœ°å¯åŠ¨API
./scripts/start_living.sh dev
```

### æ–¹å¼2: ç”Ÿäº§æ¨¡å¼
```bash
# å®Œæ•´å¯åŠ¨
docker-compose -f docker-compose.living.yml up -d

# æˆ–
./scripts/start_living.sh prod
```

### æ–¹å¼3: ç›´æ¥Python
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export LIVING_DB_HOST=localhost
export LIVING_DB_PORT=5433
export LIVING_PORT=8888

# å¯åŠ¨
python -m open_notebook.skills.living.api_server
```

## APIç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/` | GET | ç³»ç»Ÿä¿¡æ¯ |
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/stats` | GET | ç³»ç»Ÿç»Ÿè®¡ |
| `/cells` | GET | åˆ—å‡ºæ‰€æœ‰Skill |
| `/cells/{id}` | GET | Skillè¯¦æƒ… |
| `/cells/{id}/invoke` | POST | æ‰§è¡ŒSkill |
| `/agents` | GET | åˆ—å‡ºæ‰€æœ‰Agent |
| `/agents/{id}/execute` | POST | æ‰§è¡ŒAgent |
| `/agents/{id}/stimulate` | POST | åˆºæ¿€Agent |
| `/triggers` | GET | åˆ—å‡ºè§¦å‘å™¨ |
| `/triggers/{id}/activate` | POST | æ¿€æ´»è§¦å‘å™¨ |
| `/meridians` | GET | ç»ç»œçŠ¶æ€ |
| `/data/lineage/{id}` | GET | æ•°æ®è¡€ç¼˜ |

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Living Knowledge System                  â”‚
â”‚                        Port: 8888                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Layer (FastAPI)                                       â”‚
â”‚  â”œâ”€â”€ /health, /stats                                       â”‚
â”‚  â”œâ”€â”€ /cells, /agents, /triggers                            â”‚
â”‚  â””â”€â”€ /meridians, /data                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Organ Layer                                               â”‚
â”‚  â”œâ”€â”€ P0 Perception (PainScanner, EmotionWatcher...)        â”‚
â”‚  â”œâ”€â”€ P1 Judgment (å¾…å®ç°)                                   â”‚
â”‚  â”œâ”€â”€ P2 Relationship (å¾…å®ç°)                               â”‚
â”‚  â”œâ”€â”€ P3 Evolution (å¾…å®ç°)                                  â”‚
â”‚  â””â”€â”€ P4 Data Agent (DataGenerator, FlowMonitor...)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database Layer (PostgreSQL + TimescaleDB)                 â”‚
â”‚  â”œâ”€â”€ cell_states                                           â”‚
â”‚  â”œâ”€â”€ agent_states                                          â”‚
â”‚  â”œâ”€â”€ meridian_metrics (hypertable)                         â”‚
â”‚  â”œâ”€â”€ trigger_records                                       â”‚
â”‚  â””â”€â”€ data_lineage                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯åš
1. **æµ‹è¯•å¯åŠ¨** - è¿è¡Œ `./scripts/start_living.sh dev` éªŒè¯ç³»ç»Ÿ
2. **P0é‡æ„** - å°†ç°æœ‰P0ç³»ç»Ÿè¿ç§»åˆ°Livingæ¶æ„
3. **æ·»åŠ æµ‹è¯•** - ä¸ºæ ¸å¿ƒç»„ä»¶æ·»åŠ å•å…ƒæµ‹è¯•

### çŸ­æœŸ(1-2å‘¨)
1. **P1-P3å®ç°** - å®Œæˆåˆ¤æ–­ã€å…³ç³»ã€è¿›åŒ–å±‚
2. **Agentlyé›†æˆ** - å®ç°å·¥ä½œæµè§¦å‘å™¨
3. **ç›‘æ§é¢æ¿** - ç®€å•çš„Web UIæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€

### é•¿æœŸ(1-3æœˆ)
1. **ä»£è°¢æ¨¡å‹** - èƒ½é‡/ç–²åŠ³/é€‚åº”æœºåˆ¶
2. **çªè§¦å­¦ä¹ ** - Hebbianæƒé‡æ›´æ–°
3. **äº§å“åŒ–** - ç‹¬ç«‹éƒ¨ç½²ã€æ–‡æ¡£å®Œå–„

## å…³é”®å†³ç­–è®°å½•

| å†³ç­– | é€‰æ‹© | åŸå›  |
|------|------|------|
| éƒ¨ç½²æ–¹å¼ | ç‹¬ç«‹æœåŠ¡(B) | é•¿æœŸæ¼”è¿›è‡ªç”±ï¼Œå¯äº§å“åŒ– |
| æ•°æ®åº“ | PostgreSQL | ç”Ÿæ€æˆç†Ÿï¼Œå¯å€Ÿé‰´æ€§é«˜ |
| P4 DataAgent | ä¸€èµ·éƒ¨ç½² | æ•°æ®ç”Ÿå‘½å‘¨æœŸæ˜¯æ ¸å¿ƒèƒ½åŠ› |
| ç«¯å£ | 8888 | ä¸ä¸Open Notebookå†²çª |

## æŠ€æœ¯å€ºåŠ¡

| é¡¹ç›® | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|--------|------|
| æµ‹è¯•è¦†ç›– | ğŸ”´ é«˜ | éœ€è¦å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• |
| é…ç½®ç®¡ç† | ğŸŸ¡ ä¸­ | å½“å‰ä½¿ç”¨env varï¼Œéœ€è¦é…ç½®æ–‡ä»¶ |
| æ—¥å¿—èšåˆ | ğŸŸ¡ ä¸­ | å¤šæœåŠ¡æ—¥å¿—éœ€è¦é›†ä¸­æ”¶é›† |
| ç›‘æ§å‘Šè­¦ | ğŸŸ¢ ä½ | éœ€è¦Prometheus/Grafana |
